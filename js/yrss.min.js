/* YRSS 1.0.6 */
/* Copyright (c) 2016 Mark Hillard - MIT License */

!function(a){"use strict";a.fn.rssfeed=function(c,d,e){var f={ssl:!1,limit:10,showerror:!0,errormsg:"",tags:!1,date:!0,dateformat:"default",titletag:"h4",content:!0,image:!1,snippet:!0,snippetlimit:120,linktarget:"_self"};return d=a.extend(f,d),this.each(function(f,g){var h="";if(d.ssl&&(h="s"),a(g).hasClass("rssFeed")||a(g).addClass("rssFeed"),null===c)return!1;var i="http"+h+"://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from feed where url="'+c+'"');null!==d.limit&&(i+=" limit "+d.limit),i+="&format=json",a.getJSON(i,function(c,f,h){if("success"===f)b(g,c,d),a.isFunction(e)&&e.call(this,a(g));else if("error"===f||"parsererror"===f){if(!d.showerror)return!1;var i;i=""!==d.errormsg?d.errormsg:h,a(g).html('<div class="rssError"><p>'+i+"</p></div>")}})})};var b=function(b,c,d){var e=c.query.results.item;if(a.isArray(e)||(e=[e]),!e)return!1;var g,f="";a.each(e,function(a){var c,b=e[a];void 0!==b.category&&(c=b.category.toString().toLowerCase().replace(/ /g,"-").replace(/,/g," "));var g;if(b.pubDate){var h=new Date(b.pubDate);if("default"===d.dateformat)g=(h.getMonth()+1).toString()+"/"+h.getDate().toString()+"/"+h.getFullYear();else if("spellmonth"===d.dateformat){var i=["January","February","March","April","May","June","July","August","September","October","November","December"];g=i[h.getMonth()]+" "+h.getDate().toString()+", "+h.getFullYear()}else"localedate"===d.dateformat?g=h.toLocaleDateString():"localedatetime"===d.dateformat&&(g=h.toLocaleDateString()+" "+h.toLocaleTimeString())}if(f+='<div class="entryWrapper"',d.tags&&void 0!==b.category&&(f+='data-tag="'+c+'"'),f+='><div class="entryTitle"><'+d.titletag+'><a href="'+b.link+'">'+b.title+"</a></"+d.titletag+"></div>",d.date&&g&&(f+='<div class="entryDate">'+g+"</div>"),d.content){var j=b.description;f+='<div class="entryContent">'+j+"</div>"}f+="</div>"}),g=a(f),d.content&&a.each(g,function(){if(d.image){var b=a(this).find("img").first();0!==b.length&&(a(this).prepend('<div class="entryImage">'),a(this).find(".entryImage").append(b).nextAll().wrapAll('<div class="entryText"></div>'))}if(d.snippet){var c=a(this).find(".entryContent"),e=a(c).text().length;c.text(function(a,b){return e<=d.snippetlimit?b:b.substring(0,d.snippetlimit)+" ..."})}}),a(b).append(g),a("a",b).attr("target",d.linktarget)}}(jQuery);
