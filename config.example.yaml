# Muximux 3 Configuration Example
# Copy this file to data/config.yaml and customize as needed
#
# Environment variable expansion:
#   Use ${VAR_NAME} in any string value to reference environment variables.
#   This keeps secrets out of config files — set them in your environment,
#   Docker Compose, or systemd unit instead.
#   Example: client_secret: ${OIDC_CLIENT_SECRET}

server:
  listen: ":8080"
  title: "Muximux"
  log_level: info               # debug, info, warn, error (hot-reloadable)
  proxy_timeout: 30s            # Global timeout for proxied requests
  # base_path: /muximux         # Subpath when behind a reverse proxy (e.g. /muximux)

  # Optional: enable HTTPS on this port
  # tls:
  #   domain: "muximux.example.com"  # Auto-HTTPS via Let's Encrypt
  #   email: "admin@example.com"
  #   # Or bring your own certs (use domain OR cert, not both):
  #   # cert: /path/to/cert.pem
  #   # key: /path/to/key.pem

  # Optional: reverse proxy additional sites through this port (Caddyfile format)
  # gateway: /path/to/sites.Caddyfile

# Health monitoring
health:
  enabled: true
  interval: 30s    # How often to check app health
  timeout: 5s      # Request timeout for health checks

# Authentication
auth:
  method: none  # none, builtin, forward_auth, oidc
  # session_max_age: 24h       # How long sessions last
  # secure_cookies: false      # Set true when using HTTPS
  # api_key: ${MUXIMUX_API_KEY}  # For auth bypass rules

  # For builtin auth:
  # users:
  #   - username: admin
  #     password_hash: "$2a$10$..."  # bcrypt hash
  #     role: admin

  # For forward_auth (Authelia/Authentik):
  # trusted_proxies:
  #   - 10.0.0.0/8
  # headers:
  #   user: Remote-User
  #   email: Remote-Email
  #   groups: Remote-Groups

  # For OIDC:
  # oidc:
  #   enabled: true
  #   issuer_url: https://auth.example.com
  #   client_id: ${OIDC_CLIENT_ID}
  #   client_secret: ${OIDC_CLIENT_SECRET}
  #   redirect_url: https://muximux.example.com/api/auth/oidc/callback
  #   scopes: [openid, profile, email]
  #   username_claim: preferred_username  # default
  #   email_claim: email                  # default
  #   groups_claim: groups                # default
  #   display_name_claim: name            # default
  #   admin_groups: [admins]

# Theme
theme:
  family: default              # default, nord, dracula, catppuccin, solarized, etc.
  variant: system              # dark, light, system (follow OS preference)

# Navigation layout
navigation:
  position: top                # top, left, right, bottom, floating
  width: 220px
  auto_hide: false
  auto_hide_delay: 0.5s
  show_on_hover: true
  show_labels: true
  show_logo: true
  show_app_colors: true
  show_icon_background: true
  show_splash_on_startup: false
  show_shadow: true
  icon_scale: 1.0              # Icon zoom multiplier
  bar_style: grouped           # grouped (default) or flat (top/bottom bars only)

# Keyboard shortcuts (only overrides — defaults are managed client-side)
# keybindings:
#   bindings:
#     search:
#       - key: "k"
#         ctrl: true

# Icon settings
icons:
  dashboard_icons:
    enabled: true
    mode: on_demand  # on_demand, prefetch, offline
    cache_dir: icons/dashboard
    cache_ttl: 7d

# App groups
groups:
  - name: Media
    icon:
      type: lucide
      name: play
    color: "#e5a00d"
    order: 1

  - name: Downloads
    icon:
      type: lucide
      name: download
    color: "#3498db"
    order: 2

  - name: System
    icon:
      type: lucide
      name: server
    color: "#e74c3c"
    order: 3

# Applications
apps:
  - name: Plex
    url: http://localhost:32400
    icon:
      type: dashboard
      name: plex
      # invert: true            # Flip icon colors (dark ↔ light)
      # background: "#1a1a2e"   # Override icon background color
    color: "#e5a00d"
    group: Media
    order: 1
    enabled: true
    default: true
    open_mode: iframe
    proxy: false
    scale: 1
    # health_check: false       # Disable health monitoring for this app
    # shortcut: 1               # Assign keyboard shortcut (1-9)
    # force_icon_background: true  # Show icon background even when global setting is off

  - name: Sonarr
    url: http://localhost:8989
    # health_url: http://localhost:8989/ping  # Custom health check URL
    icon:
      type: dashboard
      name: sonarr
    color: "#3498db"
    group: Downloads
    order: 1
    enabled: true
    open_mode: iframe
    proxy: true
    proxy_skip_tls_verify: true      # Skip TLS cert verification (default: true)
    # proxy_headers:                 # Custom headers sent to the backend
    #   X-Api-Key: "your-api-key"
    auth_bypass:
      - path: /api/*
        require_api_key: true
      - path: /feed/*
        methods: [GET]

  - name: Radarr
    url: http://localhost:7878
    icon:
      type: dashboard
      name: radarr
    color: "#ffc107"
    group: Downloads
    order: 2
    enabled: true
    open_mode: iframe
    proxy: true
    auth_bypass:
      - path: /api/*
        require_api_key: true

  - name: Portainer
    url: http://localhost:9000
    icon:
      type: dashboard
      name: portainer
    color: "#13bef9"
    group: System
    order: 1
    enabled: true
    open_mode: new_tab  # Opens in new browser tab
    proxy: false
    # min_role: admin                   # Only visible to admin users
    # access:                           # Or restrict to specific roles/users
    #   roles: [admin]
    #   users: []
