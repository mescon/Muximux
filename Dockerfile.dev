# Frontend development stage
FROM node:20-alpine AS frontend
WORKDIR /app
COPY web/package*.json ./
RUN npm ci
# Source mounted as volume, just need node_modules
EXPOSE 5173

# Backend development stage
FROM golang:1.22-alpine AS backend
WORKDIR /app

# Install air for hot reload
RUN go install github.com/air-verse/air@latest

# Install dependencies
COPY go.mod go.sum ./
RUN go mod download

EXPOSE 8080
