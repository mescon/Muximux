# Frontend development stage
FROM node:25-alpine AS frontend
WORKDIR /app
COPY web/package*.json ./
RUN npm ci --ignore-scripts
# Source mounted as volume, just need node_modules
USER 1000
EXPOSE 5173

# Backend development stage
FROM golang:1.26-alpine AS backend
WORKDIR /app

# Install air for hot reload
RUN go install github.com/air-verse/air@latest

# Install dependencies
COPY go.mod go.sum ./
RUN go mod download

USER 1000
EXPOSE 8080
